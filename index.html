<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å…³é”®è¯MVPé¦–é¡µ+å·¥ä½œå°</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; background: #f3f4f6; margin: 0; }
    .container { max-width: 1200px; margin: 0 auto; padding: 40px 16px; }
    .title { font-size: 2.5rem; font-weight: bold; text-align: center; margin-bottom: 16px; }
    .subtitle { font-size: 1.2rem; color: #6366f1; text-align: center; margin-bottom: 32px; }
    .flow { display: flex; justify-content: center; align-items: center; gap: 32px; margin-bottom: 32px; }
    .flow-step { background: #6366f1; color: #fff; border-radius: 50%; width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; }
    .arrow { font-size: 2rem; color: #6366f1; }
    .table-wrap { display: flex; justify-content: center; }
    table { border-collapse: collapse; min-width: 480px; }
    th, td { border: 1px solid #e5e7eb; padding: 8px 16px; text-align: center; }
    th { background: #f3f4f6; font-weight: bold; }
    .cta-btn { display: block; margin: 40px auto 0; background: #6366f1; color: #fff; font-size: 1.2rem; padding: 16px 40px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    .workspace { display: flex; gap: 32px; margin-top: 64px; }
    .sidebar { width: 300px; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 24px; }
    .main { flex: 1; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 24px; }
    .site-list { margin-top: 16px; }
    .site-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #f3f4f6; cursor:pointer; }
    .site-item.selected { background: #eef2ff; }
    .add-site { display: flex; gap: 8px; margin-top: 12px; }
    .add-site input { flex: 1; padding: 6px 8px; border: 1px solid #e5e7eb; border-radius: 4px; }
    .add-site button { background: #6366f1; color: #fff; border: none; border-radius: 4px; padding: 6px 16px; cursor: pointer; }
    .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .add-keyword-btn { background: #6366f1; color: #fff; border: none; border-radius: 4px; padding: 8px 20px; cursor: pointer; }
    .keyword-table th, .keyword-table td { font-size: 0.95rem; }
    .tag { display: inline-block; padding: 2px 8px; border-radius: 6px; font-size: 0.85em; }
    .tag.green { background: #dcfce7; color: #22c55e; }
    .tag.red { background: #fee2e2; color: #ef4444; }
    .tag.gray { background: #f3f4f6; color: #6b7280; }
    .actions button { margin: 0 2px; border: none; background: none; font-size: 1.1em; cursor: pointer; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #0005; align-items: center; justify-content: center; z-index: 100; }
    .modal.active { display: flex; }
    .modal-content { background: #fff; border-radius: 10px; padding: 32px 24px; min-width: 320px; }
    .modal-content label { display: block; margin-top: 12px; margin-bottom: 4px; }
    .modal-content input, .modal-content select { width: 100%; padding: 6px 8px; border: 1px solid #e5e7eb; border-radius: 4px; }
    .modal-content .modal-actions { margin-top: 20px; text-align: right; }
    .modal-content button { margin-left: 8px; }
    .empty-tip { color: #888; text-align: center; margin-top: 40px; }
  </style>
</head>
<body>
  <div class="container">
    <!-- å·¥ä½œå°å†…å®¹ -->
    <div class="workspace" id="workspace" style="margin-top:0;">
      <!-- å·¦ä¾§æ  -->
      <div class="sidebar">
        <div style="font-weight:bold; font-size:1.1rem;">â‘  æ·»åŠ ä½ æ‰¾åˆ°çš„èµšé’±ç½‘ç«™</div>
        <div class="add-site">
          <input id="site-input" type="text" placeholder="è¾“å…¥ç½‘ç«™åŸŸå..." />
          <button onclick="addSite()">æ·»åŠ </button>
        </div>
        <div class="site-list" id="site-list"></div>
      </div>
      <!-- å³ä¾§ä¸»åŒº -->
      <div class="main">
        <div class="main-header">
          <div id="main-title" style="font-weight:bold; font-size:1.1rem;">â‘¡ é€‰æ‹©å·¥å…·ç«™ä»¥æ·»åŠ å…³é”®è¯</div>
          <button class="add-keyword-btn" id="add-keyword-btn" onclick="showModal()" disabled>æ·»åŠ å…³é”®è¯</button>
        </div>
        <div id="keyword-table-wrap"></div>
      </div>
    </div>

    <!-- é¦–é¡µå†…å®¹ -->
    <div class="title" style="margin-top: 64px;">æµ·å¤–å·¥å…·ç«™æ‰¾è¯çš„æ ¸å¿ƒæ­¥éª¤</div>
    <div class="subtitle">ç”¨ç»“æ„åŒ–æµç¨‹é«˜æ•ˆç­›é€‰å…³é”®è¯</div>
    <div class="flow">
      <div class="flow-step">1</div>
      <span class="arrow">â†’</span>
      <div class="flow-step">2</div>
      <span class="arrow">â†’</span>
      <div class="flow-step">3</div>
    </div>
    <div style="text-align:center; margin-bottom:24px; color:#6b7280;">1. æ‰¾é‡‘ç‰›å·¥å…·ç«™  2. æŸ¥å…³é”®è¯  3. åˆ¤æ–­æœºä¼š</div>
    <div class="table-wrap">
      <table>
        <tr><th>æŒ‡æ ‡</th><th>æ ‡å‡†</th><th>è¯´æ˜</th></tr>
        <tr><td>ä¼˜åŒ–éš¾åº¦ (KD)</td><td>&lt; 30</td><td>æ˜“æ’å</td></tr>
        <tr><td>æœˆæœç´¢é‡</td><td>&gt; 1000</td><td>æœ‰éœ€æ±‚</td></tr>
        <tr><td>Googleç»“æœç±»å‹</td><td>ä»¥å†…é¡µä¸ºä¸»</td><td>æœºä¼šå¤§</td></tr>
        <tr><td>éœ€æ±‚ç±»å‹</td><td>é•¿æœŸç¨³å®š</td><td>é•¿æœŸä»·å€¼</td></tr>
        <tr><td>è‡ªç„¶æœç´¢è¯-éå“ç‰Œè¯</td><td>æ˜¯</td><td>æ’é™¤å“ç‰Œè¯</td></tr>
      </table>
    </div>

    <!-- å…³é”®è¯å¼¹çª—åŸå‹ -->
    <div class="modal" id="modal">
      <div class="modal-content">
        <div style="font-size:1.1rem;font-weight:bold;margin-bottom:8px;">æ·»åŠ å…³é”®è¯</div>
        <label>å…³é”®è¯</label><input type="text" id="kw-keyword" />
        <label>æœˆæœç´¢é‡</label><input type="number" id="kw-searchVolume" />
        <label>ä¼˜åŒ–éš¾åº¦(KD)</label><input type="number" id="kw-kd" />
        <label>å¤–é“¾éœ€æ±‚</label><input type="number" id="kw-backlink" />
        <label>Googleç»“æœç±»å‹</label>
        <select id="kw-googleType"><option value="inner_page">ä»¥å†…é¡µä¸ºä¸»</option><option value="homepage">ä»¥é¦–é¡µä¸ºä¸»</option></select>
        <label>éœ€æ±‚ç±»å‹</label>
        <select id="kw-demandType"><option value="stable">é•¿æœŸç¨³å®š</option><option value="seasonal">å­£èŠ‚æ€§</option></select>
        <label>è‡ªç„¶æœç´¢è¯-éå“ç‰Œè¯</label>
        <select id="kw-nature"><option value="yes">æ˜¯</option><option value="no">å¦</option></select>
        <div class="modal-actions">
          <button onclick="hideModal()">å–æ¶ˆ</button>
          <button onclick="addKeyword()">æ·»åŠ </button>
        </div>
      </div>
    </div>
  </div>
  <script>
    // æ•°æ®ç»“æ„
    function getSites() {
      return JSON.parse(localStorage.getItem('kw-sites') || '[]');
    }
    function setSites(sites) {
      localStorage.setItem('kw-sites', JSON.stringify(sites));
    }
    function getKeywords() {
      return JSON.parse(localStorage.getItem('kw-keywords') || '[]');
    }
    function setKeywords(keywords) {
      localStorage.setItem('kw-keywords', JSON.stringify(keywords));
    }
    // çŠ¶æ€
    let selectedSiteId = null;
    // å·¥å…·ç«™æ¸²æŸ“
    function renderSites() {
      const sites = getSites();
      const list = document.getElementById('site-list');
      list.innerHTML = '';
      sites.forEach(site => {
        const div = document.createElement('div');
        div.className = 'site-item' + (site.id === selectedSiteId ? ' selected' : '');
        div.innerHTML = `<span>${site.domain}</span><span style="color:#ef4444;cursor:pointer;" title="åˆ é™¤">Ã—</span>`;
        div.onclick = () => { selectedSiteId = site.id; renderSites(); renderKeywords(); };
        div.querySelector('span[title]')?.addEventListener('click', e => { e.stopPropagation(); deleteSite(site.id); });
        list.appendChild(div);
      });
      // é€‰ä¸­åå³ä¾§å¯ç”¨
      document.getElementById('add-keyword-btn').disabled = !selectedSiteId;
      document.getElementById('main-title').textContent = selectedSiteId ? `â‘¡ ä¸º ${sites.find(s=>s.id===selectedSiteId).domain} æ·»åŠ å…³é”®è¯` : 'â‘¡ é€‰æ‹©å·¥å…·ç«™ä»¥æ·»åŠ å…³é”®è¯';
    }
    function addSite() {
      const input = document.getElementById('site-input');
      const val = input.value.trim();
      if (!val) return;
      const sites = getSites();
      const newSite = { id: Date.now().toString(), domain: val, createdAt: new Date().toISOString() };
      sites.push(newSite);
      setSites(sites);
      input.value = '';
      selectedSiteId = newSite.id;
      renderSites();
      renderKeywords();
    }
    function deleteSite(id) {
      let sites = getSites();
      sites = sites.filter(s => s.id !== id);
      setSites(sites);
      // åˆ é™¤å…³è”å…³é”®è¯
      let kws = getKeywords();
      kws = kws.filter(k => k.toolSiteId !== id);
      setKeywords(kws);
      if (selectedSiteId === id) selectedSiteId = sites[0]?.id || null;
      renderSites();
      renderKeywords();
    }
    // å…³é”®è¯æ¸²æŸ“
    function renderKeywords() {
      const wrap = document.getElementById('keyword-table-wrap');
      if (!selectedSiteId) {
        wrap.innerHTML = '<div class="empty-tip">è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå·¥å…·ç«™</div>';
        return;
      }
      const kws = getKeywords().filter(k => k.toolSiteId === selectedSiteId);
      if (kws.length === 0) {
        wrap.innerHTML = '<div class="empty-tip">æš‚æ— å…³é”®è¯ï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’æ·»åŠ </div>';
        return;
      }
      let html = `<table class="keyword-table" style="width:100%;"><tr><th>å…³é”®è¯</th><th>æœˆæœç´¢é‡</th><th>KD</th><th>å¤–é“¾éœ€æ±‚</th><th>Googleç»“æœ</th><th>éœ€æ±‚ç±»å‹</th><th>è‡ªç„¶æœç´¢è¯-éå“ç‰Œè¯</th><th>çŠ¶æ€</th><th>æ“ä½œ</th></tr>`;
      for (const kw of kws) {
        html += `<tr>
          <td>${kw.keyword}</td>
          <td class="${kw.searchVolume<1000?'tag gray':''}">${kw.searchVolume}</td>
          <td class="${kw.keywordDifficulty<30?'tag green':kw.keywordDifficulty>50?'tag red':''}">${kw.keywordDifficulty}</td>
          <td>${kw.backlinkNeeded}</td>
          <td>${kw.googleResultType==='inner_page'?'<span class="tag green">æœºä¼š</span>':'<span class="tag gray">ä»¥é¦–é¡µä¸ºä¸»</span>'}</td>
          <td>${kw.demandType==='stable'?'é•¿æœŸç¨³å®š':'å­£èŠ‚æ€§'}</td>
          <td>${kw.nature==='yes'?'<span class="tag green">æ˜¯</span>':'<span class="tag red">å¦</span>'}</td>
          <td>${kw.status==='opportunity'?'<span class="tag green">æœºä¼š</span>':kw.status==='rejected'?'<span class="tag red">æ”¾å¼ƒ</span>':'<span class="tag gray">å¾…å®š</span>'}</td>
          <td class="actions">
            ${kw.status!=='opportunity'?`<button title="æ ‡è®°ä¸ºæœºä¼š" onclick="setKwStatus('${kw.id}','opportunity')">âœ”ï¸</button>`:''}
            ${kw.status!=='rejected'?`<button title="æ”¾å¼ƒ" onclick="setKwStatus('${kw.id}','rejected')">âŒ</button>`:''}
            <button title="åˆ é™¤" onclick="deleteKeyword('${kw.id}')">ğŸ—‘ï¸</button>
          </td>
        </tr>`;
      }
      html += '</table>';
      wrap.innerHTML = html;
    }
    function setKwStatus(id, status) {
      const kws = getKeywords();
      const idx = kws.findIndex(k => k.id === id);
      if (idx > -1) { kws[idx].status = status; setKeywords(kws); renderKeywords(); }
    }
    function deleteKeyword(id) {
      let kws = getKeywords();
      kws = kws.filter(k => k.id !== id);
      setKeywords(kws);
      renderKeywords();
    }
    // å¼¹çª—è¡¨å•
    function showModal() {
      document.getElementById('modal').classList.add('active');
    }
    function hideModal() {
      document.getElementById('modal').classList.remove('active');
      // æ¸…ç©ºè¡¨å•
      document.getElementById('kw-keyword').value = '';
      document.getElementById('kw-searchVolume').value = '';
      document.getElementById('kw-kd').value = '';
      document.getElementById('kw-backlink').value = '';
      document.getElementById('kw-googleType').value = 'inner_page';
      document.getElementById('kw-demandType').value = 'stable';
      document.getElementById('kw-nature').value = 'yes';
    }
    function addKeyword() {
      const keyword = document.getElementById('kw-keyword').value.trim();
      const searchVolume = parseInt(document.getElementById('kw-searchVolume').value) || 0;
      const keywordDifficulty = parseInt(document.getElementById('kw-kd').value) || 0;
      const backlinkNeeded = parseInt(document.getElementById('kw-backlink').value) || 0;
      const googleResultType = document.getElementById('kw-googleType').value;
      const demandType = document.getElementById('kw-demandType').value;
      const nature = document.getElementById('kw-nature').value;
      if (!keyword) return;
      const kws = getKeywords();
      kws.push({
        id: Date.now().toString(),
        toolSiteId: selectedSiteId,
        keyword,
        searchVolume,
        keywordDifficulty,
        backlinkNeeded,
        googleResultType,
        demandType,
        nature,
        status: 'pending',
        createdAt: new Date().toISOString()
      });
      setKeywords(kws);
      hideModal();
      renderKeywords();
    }
    // åˆå§‹åŒ–
    renderSites();
    renderKeywords();
  </script>
</body>
</html> 